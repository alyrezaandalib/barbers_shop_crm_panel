'use client'
import React, {useEffect, useRef, useState} from "react";
import 'ol/ol.css';
import Map from 'ol/Map';
import Overlay from 'ol/Overlay';
import NeshanMap, {NeshanMapRef} from "@neshan-maps-platform/react-openlayers";
import "@neshan-maps-platform/ol/ol.css";

export default function Ttt() {
    const mapRef = useRef<NeshanMapRef | null>(null);
    const [selectedLocation, setSelectedLocation] = useState<{ latitude: number, longitude: number } | null>(null);

    const addMarker = (map: Map, latitude: number, longitude: number) => {
        console.log(latitude , "lat")
        // Remove previous markers
        map.getOverlays().clear();

        // Create a new marker at the selected coordinates with a custom icon
        const marker = new Overlay({
            position: [longitude, latitude],
            element: new Image(),
        });

        // Customize the marker's appearance using an image
        const markerElement: HTMLImageElement = marker.getElement() as HTMLImageElement;

        // Convert React icon to a data URL
        const iconDataURL = `data:image/svg+xml;base64,${btoa('<?xml version="1.0" encoding="UTF-8"?>\n' +
            '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="3000" height="3000">\n' +
            '<path d="M0 0 C0.86737793 0.48533203 1.73475586 0.97066406 2.62841797 1.47070312 C38.16963959 21.36068448 71.79122963 44.105729 104 69 C104.68787598 69.53044922 105.37575195 70.06089844 106.08447266 70.60742188 C114.01275286 76.73206409 121.74132915 83.05783835 129.34375 89.58203125 C131.04685578 91.04011474 132.75709274 92.48946852 134.46875 93.9375 C141.3270239 99.75425136 148.03207024 105.70338324 154.60498047 111.84057617 C156.72726575 113.82010966 158.85791156 115.78944358 161.00219727 117.74511719 C168.41534331 124.51439314 175.61985704 131.46242114 182.70458984 138.57421875 C184.39175958 140.26681347 186.08430196 141.95390597 187.77734375 143.640625 C192.85758074 148.71775427 197.85373559 153.8070584 202.51904297 159.27392578 C204.88596501 162.03260346 207.38872496 164.66183968 209.875 167.3125 C214.33826707 172.10995628 218.56974429 177.03162373 222.671875 182.14453125 C224.81420035 184.77211485 227.01153751 187.33415518 229.23876953 189.88916016 C236.01772325 197.67564819 242.29551965 205.78515081 248.50537109 214.02929688 C249.83871953 215.78734793 251.18784004 217.53048145 252.55078125 219.265625 C280.00029747 254.3075606 302.99963288 292.83458664 324 332 C324.49113281 332.91233398 324.98226562 333.82466797 325.48828125 334.76464844 C370.63367987 418.89113334 399.74818778 511.9950843 427.6875 709.625 C427.74852905 710.50078705 427.80955811 711.3765741 427.87243652 712.27890015 C429.52295446 736.35311843 430.21072919 760.43404181 430.1875 784.5625 C430.18689575 785.74421783 430.1862915 786.92593567 430.18566895 788.14346313 C430.05898114 880.45484451 417.31831746 972.33254661 376 1107 C375.76710266 1107.66497498 375.53420532 1108.32994995 375.29425049 1109.01507568 C358.23017781 1157.61289635 337.21802958 1205.01206126 311.78613281 1249.81542969 C309.41331982 1254.04601643 307.12505104 1258.31943448 304.83911133 1262.59741211 C299.6979765 1272.21623599 294.34280075 1281.58240641 288.43847656 1290.75 C285.41817856 1295.47421357 282.46666488 1300.24200236 279.5 1305 C272.2738624 1316.58078453 272.2738624 1316.58078453 269.34375 1321.1796875 C262.16992375 1332.46713521 255.56514425 1344.07489491 248.91259766 1355.67480469 C245.94294937 1360.83776226 242.94211317 1365.9823344 239.9375 1371.125 C239.36346436 1372.10807129 238.78942871 1373.09114258 238.19799805 1374.10400391 C235.88970155 1378.05617087 233.58007111 1382.00755761 231.27050781 1385.95898438 C224.01146858 1398.38082591 216.78695829 1410.82158421 209.60571289 1423.28857422 C204.85585468 1431.52969191 200.06904959 1439.7486691 195.26953125 1447.9609375 C190.98777854 1455.29283764 186.73795309 1462.64270807 182.5 1470 C174.80882531 1483.35015665 167.0451704 1496.65733128 159.27050781 1509.95898438 C152.01146858 1522.38082591 144.78695829 1534.82158421 137.60571289 1547.28857422 C132.85585468 1555.52969191 128.06904959 1563.7486691 123.26953125 1571.9609375 C118.98777854 1579.29283764 114.73795309 1586.64270807 110.5 1594 C102.80882531 1607.35015665 95.0451704 1620.65733128 87.27050781 1633.95898438 C80.01146858 1646.38082591 72.78695829 1658.82158421 65.60571289 1671.28857422 C60.85585468 1679.52969191 56.06904959 1687.7486691 51.26953125 1695.9609375 C46.98777854 1703.29283764 42.73795309 1710.64270807 38.5 1718 C30.80882531 1731.35015665 23.0451704 1744.65733128 15.27050781 1757.95898438 C8.01146858 1770.38082591 0.78695829 1782.82158421 -6.39428711 1795.28857422 C-11.14414532 1803.52969191 -15.93095041 1811.7486691 -20.73046875 1819.9609375 C-25.01222146 1827.29283764 -29.26204691 1834.64270807 -33.5 1842 C-41.19117469 1855.35015665 -48.9548296 1868.65733128 -56.72949219 1881.95898438 C-63.98853142 1894.38082591 -71.21304171 1906.82158421 -78.39428711 1919.28857422 C-83.14414532 1927.52969191 -87.93095041 1935.7486691 -92.73046875 1943.9609375 C-97.01222146 1951.29283764 -101.26204691 1958.64270807 -105.5 1966 C-113.19117469 1979.35015665 -120.9548296 1992.65733128 -128.72949219 2005.95898438 C-135.98853142 2018.38082591 -143.21304171 2030.82158421 -150.39428711 2043.28857422 C-155.14414532 2051.52969191 -159.93095041 2059.7486691 -164.73046875 2067.9609375 C-169.01222146 2075.29283764 -173.26204691 2082.64270807 -177.5 2090 C-185.19117469 2103.35015665 -192.9548296 2116.65733128 -200.72949219 2129.95898438 C-207.98853142 2142.38082591 -215.21304171 2154.82158421 -222.39428711 2167.28857422 C-227.14414532 2175.52969191 -231.93095041 2183.7486691 -236.73046875 2191.9609375 C-241.01222146 2199.29283764 -245.26204691 2206.64270807 -249.5 2214 C-257.20679559 2227.37727104 -264.98328945 2240.71325923 -272.77783203 2254.03955078 C-279.36860256 2265.30845491 -285.93110613 2276.59117633 -292.39550781 2287.93310547 C-301.74388546 2304.33123071 -311.20600686 2320.66353842 -320.72998047 2336.96020508 C-325.01199194 2344.29229296 -329.26196324 2351.64241865 -333.5 2359 C-338.8791408 2368.33863207 -344.29259447 2377.65640317 -349.73046875 2386.9609375 C-354.01222146 2394.29283764 -358.26204691 2401.64270807 -362.5 2409 C-370.19117469 2422.35015665 -377.9548296 2435.65733128 -385.72949219 2448.95898438 C-387.46606836 2451.93065505 -389.20201192 2454.90269374 -390.9375 2457.875 C-391.51395264 2458.86218018 -392.09040527 2459.84936035 -392.68432617 2460.86645508 C-396.31323209 2467.08808495 -399.91805315 2473.32309089 -403.5078125 2479.56738281 C-406.0081648 2483.91292188 -408.51870159 2488.25252921 -411.03076172 2492.59130859 C-412.38815222 2494.94091016 -413.74177607 2497.29232267 -415.09033203 2499.64697266 C-416.8519528 2502.72169547 -418.62650764 2505.78863963 -420.40924072 2508.85116577 C-421.40491175 2510.56878251 -422.38798168 2512.29368476 -423.37060547 2514.01879883 C-428.49768393 2522.7879584 -433.86404229 2530.11155244 -443.3125 2534.4375 C-444.31925781 2534.91058594 -445.32601562 2535.38367187 -446.36328125 2535.87109375 C-455.32590867 2539.70842608 -467.9095139 2539.5093287 -477.125 2536.4375 C-489.79382671 2530.82870056 -496.66219011 2520.71407166 -503.12353516 2508.95532227 C-506.56009352 2502.71245156 -510.19350523 2496.6011635 -513.875 2490.5 C-515.17993436 2488.33478418 -516.48461284 2486.16941412 -517.7890625 2484.00390625 C-518.29608704 2483.16231712 -518.29608704 2483.16231712 -518.81335449 2482.3037262 C-522.98915506 2475.36631404 -527.11904081 2468.40167087 -531.25 2461.4375 C-532.05499529 2460.08104417 -532.86000841 2458.72459891 -533.66503906 2457.36816406 C-537.32368703 2451.20250488 -540.97964788 2445.03526255 -544.6318512 2438.86578369 C-546.62855999 2435.49325851 -548.62651581 2432.12147337 -550.625 2428.75 C-551.21361313 2427.75676727 -551.21361313 2427.75676727 -551.81411743 2426.74346924 C-557.80775837 2416.6347659 -563.8896647 2406.58274516 -570.01220703 2396.55172729 C-575.00281997 2388.36841275 -579.84339787 2380.11755257 -584.56005859 2371.77392578 C-588.29514749 2365.18415277 -592.15408413 2358.67581996 -596.0625 2352.1875 C-601.90106553 2342.49448006 -607.71866873 2332.78976652 -613.5 2323.0625 C-613.90411102 2322.38275116 -614.30822205 2321.70300232 -614.72457886 2321.00265503 C-620.09749944 2311.95908152 -625.39596275 2302.87767164 -630.625 2293.75 C-636.12559603 2284.14840733 -641.80914962 2274.67067866 -647.58154297 2265.23141479 C-653.36931627 2255.76127225 -658.9682371 2246.1959987 -664.48535156 2236.56494141 C-669.25598514 2228.25094806 -674.14918345 2220.0176379 -679.09863281 2211.80908203 C-683.8228244 2203.97238155 -688.50025989 2196.10917937 -693.16235352 2188.23547363 C-699.62384375 2177.32300921 -706.14044693 2166.44842344 -712.75 2155.625 C-718.77104834 2145.76489687 -724.60489862 2135.80945528 -730.34130859 2125.78100586 C-734.89853909 2117.84095888 -739.60134225 2109.998285 -744.375 2102.1875 C-750.22315262 2092.61823494 -755.97281769 2082.99886981 -761.625 2073.3125 C-767.55695832 2063.14783696 -773.55731673 2053.02848561 -779.62646484 2042.94482422 C-783.52893763 2036.45863104 -787.4046624 2029.95772328 -791.25 2023.4375 C-796.57516335 2014.41181349 -801.90520265 2005.38907491 -807.25 1996.375 C-807.65404053 1995.69345856 -808.05808105 1995.01191711 -808.47436523 1994.3097229 C-814.16927755 1984.70869573 -819.93303063 1975.15247094 -825.75 1965.625 C-831.81525359 1955.69048467 -837.70027598 1945.66326433 -843.48632812 1935.56347656 C-848.25640671 1927.24983906 -853.14948678 1919.01713485 -858.09863281 1910.80908203 C-862.8228244 1902.97238155 -867.50025989 1895.10917937 -872.16235352 1887.23547363 C-878.62384569 1876.32300592 -885.14065542 1865.44855273 -891.75 1854.625 C-897.81544502 1844.69060513 -903.70027945 1834.66325827 -909.48632812 1824.56347656 C-914.25509617 1816.25212317 -919.14728179 1808.02196346 -924.09423828 1799.81567383 C-929.26740824 1791.23270198 -934.39005472 1782.62072126 -939.5 1774 C-945.26538547 1764.27568386 -951.04978837 1754.56363937 -956.875 1744.875 C-961.36116579 1737.41204919 -965.82555586 1729.93721796 -970.25 1722.4375 C-971.024646 1721.12458984 -971.024646 1721.12458984 -971.81494141 1719.78515625 C-972.35038574 1718.87765625 -972.88583008 1717.97015625 -973.4375 1717.03515625 C-977.7006443 1709.81054445 -981.97159728 1702.59058557 -986.25 1695.375 C-986.85606079 1694.35268784 -986.85606079 1694.35268784 -987.47436523 1693.3097229 C-993.16927755 1683.70869573 -998.93303063 1674.15247094 -1004.75 1664.625 C-1010.81525359 1654.69048467 -1016.70027598 1644.66326433 -1022.48632812 1634.56347656 C-1027.25640671 1626.24983906 -1032.14948678 1618.01713485 -1037.09863281 1609.80908203 C-1041.8228244 1601.97238155 -1046.50025989 1594.10917937 -1051.16235352 1586.23547363 C-1057.62384569 1575.32300592 -1064.14065542 1564.44855273 -1070.75 1553.625 C-1076.81544502 1543.69060513 -1082.70027945 1533.66325827 -1088.48632812 1523.56347656 C-1093.25640671 1515.24983906 -1098.14948678 1507.01713485 -1103.09863281 1498.80908203 C-1107.8228244 1490.97238155 -1112.50025989 1483.10917937 -1117.16235352 1475.23547363 C-1123.62384375 1464.32300921 -1130.14044693 1453.44842344 -1136.75 1442.625 C-1142.77104834 1432.76489687 -1148.60489862 1422.80945528 -1154.34130859 1412.78100586 C-1159.23866522 1404.24835831 -1164.31329925 1395.83326537 -1169.44320679 1387.43969727 C-1174.99696253 1378.34876484 -1180.44070573 1369.19957715 -1185.8125 1360 C-1186.52850782 1358.77478787 -1187.24457172 1357.5496085 -1187.96069336 1356.32446289 C-1188.48272591 1355.43136162 -1188.48272591 1355.43136162 -1189.01530457 1354.5202179 C-1189.35830093 1353.93346786 -1189.7012973 1353.34671783 -1190.0546875 1352.7421875 C-1190.39264847 1352.16401779 -1190.73060944 1351.58584808 -1191.07881165 1350.99015808 C-1198.26861369 1338.6959173 -1205.51656899 1326.49806315 -1213.50390625 1314.703125 C-1217.66258838 1308.55995473 -1221.66768131 1302.31639623 -1225.66943359 1296.0703125 C-1226.91320596 1294.13504834 -1228.16865315 1292.20785156 -1229.42578125 1290.28125 C-1236.68895434 1279.03346083 -1242.90431936 1267.23989418 -1249.17675781 1255.41992188 C-1250.96380895 1252.06788487 -1252.77063986 1248.72743784 -1254.5859375 1245.390625 C-1294.53862018 1171.92232505 -1323.81949271 1093.62142464 -1369 838 C-1369.04130035 837.13994354 -1369.08260071 836.27988708 -1369.12515259 835.39376831 C-1369.89095325 819.1550436 -1370.20307875 802.94349521 -1370.1875 786.6875 C-1370.18689575 785.50334503 -1370.1862915 784.31919006 -1370.18566895 783.09915161 C-1370.06322143 693.66393758 -1359.00989573 604.57548849 -1307 429 C-1306.74710205 428.34678772 -1306.4942041 427.69357544 -1306.23364258 427.02056885 C-1290.87375387 387.4699446 -1273.11281414 348.50511905 -1251.67041016 311.86230469 C-1249.92319006 308.86838355 -1248.20177567 305.86044643 -1246.48046875 302.8515625 C-1238.66248787 289.30776531 -1230.30753588 276.1917814 -1221.625 263.1875 C-1220.86876846 262.05424789 -1220.86876846 262.05424789 -1220.09725952 260.89810181 C-1211.16107902 247.53381988 -1201.95722507 234.39665187 -1192.1875 221.625 C-1191.5080835 220.73506348 -1190.82866699 219.84512695 -1190.12866211 218.92822266 C-1184.3603437 211.40561837 -1178.43531835 204.02231535 -1172.40478516 196.70898438 C-1171.09873599 195.12011677 -1169.80471919 193.52137947 -1168.51171875 191.921875 C-1164.19123899 186.57910556 -1159.7353209 181.40478348 -1155.109375 176.32421875 C-1153.25373343 174.27957665 -1151.43243624 172.21215851 -1149.625 170.125 C-1142.43900679 161.89346967 -1135.02694818 153.95285686 -1127.24609375 146.28125 C-1125.32705644 144.33217558 -1123.56090311 142.34986328 -1121.8125 140.25 C-1117.19004716 134.83512668 -1111.81891436 130.15862089 -1106.59375 125.33984375 C-1103.85212265 122.80709555 -1101.17879764 120.22551724 -1098.5625 117.5625 C-1095.56178759 114.51671251 -1092.42949199 111.69233687 -1089.1875 108.90625 C-1086.64488601 106.69054352 -1084.16889802 104.40901408 -1081.6875 102.125 C-1076.80112002 97.67311345 -1071.76464457 93.4669687 -1066.61962891 89.31933594 C-1064.81015192 87.84535137 -1063.01966395 86.35009746 -1061.23046875 84.8515625 C-1051.2080012 76.47616474 -1040.92700476 68.51846201 -1030.40966797 60.77441406 C-1028.88545217 59.65202294 -1027.36335969 58.5267376 -1025.84423828 57.39746094 C-997.30287456 36.18602297 -967.11165517 17.18298466 -936 0 C-935.0212793 -0.54156738 -934.04255859 -1.08313477 -933.03417969 -1.64111328 C-887.82451555 -26.58718656 -840.77506829 -46.77261491 -791.91375732 -63.35015869 C-790.10963957 -63.96277045 -788.30696818 -64.57963696 -786.50439453 -65.19677734 C-750.74430889 -77.36627443 -714.00485726 -86.53197704 -677 -94 C-676.2084552 -94.16028687 -675.4169104 -94.32057373 -674.60137939 -94.48571777 C-634.43030741 -102.58881992 -593.83410043 -107.70742692 -553 -111 C-552.28144836 -111.05822937 -551.56289673 -111.11645874 -550.8225708 -111.17645264 C-455.59427945 -118.79951348 -358.55928299 -112.86092265 0 0 Z M-728 306 C-729.46663086 306.86310791 -729.46663086 306.86310791 -730.96289062 307.74365234 C-754.90597618 321.90072497 -777.75225003 337.9547846 -798.7722168 356.2121582 C-800.85540733 358.01994139 -802.95518509 359.80374356 -805.07666016 361.56640625 C-813.9553403 368.9829021 -822.20277607 376.92338457 -830.34350586 385.13769531 C-832.45430246 387.26694939 -834.57319401 389.38789081 -836.69335938 391.5078125 C-838.06557941 392.88494328 -839.4373409 394.26253116 -840.80859375 395.640625 C-841.73846352 396.572164 -841.73846352 396.572164 -842.68711853 397.52252197 C-846.97890546 401.86033138 -851.02358991 406.37263665 -855 411 C-855.44932388 411.51640549 -855.89864777 412.03281097 -856.36158752 412.56486511 C-864.3275595 421.72930419 -871.71280267 431.29208681 -879 441 C-879.474375 441.62632324 -879.94875 442.25264648 -880.4375 442.89794922 C-888.51574823 453.57236742 -895.86877234 464.6741877 -903 476 C-903.50144531 476.7950293 -904.00289062 477.59005859 -904.51953125 478.40917969 C-913.54341052 492.82000536 -921.37541937 507.8111121 -929 523 C-929.46680176 523.92425781 -929.93360352 524.84851563 -930.41455078 525.80078125 C-964.13275208 592.96028933 -980.27021883 669.33737226 -980.1875 744.25 C-980.18689575 745.26400879 -980.1862915 746.27801758 -980.18566895 747.32275391 C-980.15937113 763.6274015 -979.76147695 779.77599769 -978 796 C-977.87641113 797.15113281 -977.75282227 798.30226563 -977.62548828 799.48828125 C-967.2263237 892.56395549 -931.77846111 980.55934778 -861.5546875 1071.0078125 C-859.10314638 1073.87918941 -856.73440595 1076.80278357 -854.375 1079.75 C-850.85780062 1084.07741138 -847.10125901 1088.00588562 -843.109375 1091.89453125 C-841.17854196 1093.82178867 -839.39327187 1095.79938564 -837.625 1097.875 C-831.38044516 1105.13375168 -824.49016121 1111.86838913 -817.203125 1118.07421875 C-814.92580137 1120.06485802 -812.72461522 1122.12730752 -810.5234375 1124.20141602 C-803.90801903 1130.41610786 -796.99746588 1136.06567579 -789.8046875 1141.59375 C-787.96379351 1143.02821285 -786.15100845 1144.49218139 -784.34375 1145.96875 C-776.1518962 1152.6574321 -767.73617929 1158.82330113 -758.94238281 1164.69726562 C-757.09537974 1165.93602988 -755.26114138 1167.19152449 -753.4296875 1168.453125 C-734.21747147 1181.60643045 -713.77871197 1192.55243568 -693 1203 C-692.17000488 1203.4223291 -691.34000977 1203.8446582 -690.48486328 1204.27978516 C-629.93582696 1234.95291018 -557.95335489 1252.93542997 -490.01953125 1253.203125 C-488.82009888 1253.21013931 -487.6206665 1253.21715363 -486.3848877 1253.22438049 C-482.52738653 1253.24180446 -478.6700391 1253.24823456 -474.8125 1253.25 C-474.15420071 1253.25044186 -473.49590141 1253.25088371 -472.81765366 1253.25133896 C-451.7132302 1253.25876344 -430.93998835 1252.77488303 -410 1250 C-408.70916504 1249.83371094 -407.41833008 1249.66742187 -406.08837891 1249.49609375 C-328.08232604 1239.26135283 -251.63363212 1211.13898026 -187 1166 C-186.32855957 1165.53674316 -185.65711914 1165.07348633 -184.96533203 1164.59619141 C-175.02670601 1157.73783939 -165.39575143 1150.58350588 -156 1143 C-155.02289062 1142.21753906 -154.04578125 1141.43507813 -153.0390625 1140.62890625 C-147.64871469 1136.27284086 -142.43564561 1131.76452171 -137.3125 1127.09765625 C-135.33615628 1125.30492554 -133.3354327 1123.55204773 -131.3125 1121.8125 C-119.62668718 1111.62304126 -108.01893547 1100.99331863 -97.9296875 1089.20703125 C-96.04751332 1087.05434215 -94.10745322 1084.96426041 -92.15258789 1082.87768555 C-86.21183467 1076.51296212 -80.80279798 1069.84427657 -75.50390625 1062.94091797 C-73.91775862 1060.89386056 -72.30546402 1058.86964419 -70.6875 1056.84765625 C-49.78221974 1030.5982797 -31.79913577 1001.49312111 -17.13818359 971.30761719 C-15.91988169 968.83756366 -14.65838937 966.3923472 -13.39453125 963.9453125 C0.15310664 937.25823863 11.08890284 908.19247832 18.22265625 879.11279297 C19.08055761 875.67741534 20.00840203 872.26444114 20.9375 868.84765625 C38.08443026 804.56329391 40.28655509 736.56057639 30.6875 670.9375 C30.54496796 669.95247498 30.40243591 668.96744995 30.25558472 667.95257568 C28.342884 654.88616167 25.80760774 642.10932588 22.57730103 629.30569458 C22.05577049 627.22274293 21.55256601 625.13688798 21.0612793 623.04663086 C14.19509157 593.8887111 4.68759033 565.16405851 -8 538 C-8.68594238 536.52515137 -8.68594238 536.52515137 -9.38574219 535.02050781 C-19.02051223 514.41086458 -29.31447956 494.54837142 -41.51611328 475.33886719 C-42.81144012 473.29720363 -44.09410494 471.24846674 -45.37109375 469.1953125 C-65.10606435 437.83662527 -89.23448807 409.54335515 -115.42871094 383.44091797 C-117.2661576 381.60889005 -119.0981165 379.77149395 -120.9296875 377.93359375 C-126.78289308 372.07678498 -132.65282253 366.32686264 -139 361 C-140.01005308 360.12347613 -141.01921483 359.24592375 -142.02734375 358.3671875 C-150.7567286 350.89155323 -159.79023159 343.87280998 -169 337 C-169.71285156 336.46616699 -170.42570312 335.93233398 -171.16015625 335.38232422 C-189.83902672 321.45368374 -209.57090073 309.1871917 -230 298 C-230.94649414 297.48083008 -231.89298828 296.96166016 -232.86816406 296.42675781 C-294.37691872 262.95606598 -364.07715231 242.64587644 -434 238 C-435.89431763 237.87189941 -435.89431763 237.87189941 -437.8269043 237.74121094 C-449.86221821 236.97469157 -461.8795917 236.75743025 -473.9375 236.75 C-474.93589905 236.74932526 -475.9342981 236.74865051 -476.96295166 236.74795532 C-564.85493259 236.84135899 -652.34631217 261.36226418 -728 306 Z " fill="#FF0000" transform="translate(1970,287)"/>\n' +
            '</svg>\n')}`;

        console.log(iconDataURL)

        markerElement.src = iconDataURL;
        markerElement.style.width = '30px';
        markerElement.style.height = '30px';
        console.log(marker , "marker")
        // Add the marker to the map
        map.addOverlay(marker);


    };


    const onInit = (map: any) => {
        map.on('click', function (evt: any) {
            const coordinate = evt.coordinate;
            const latitude = coordinate[1];
            const longitude = coordinate[0];
            setSelectedLocation({latitude, longitude});
            addMarker(map, latitude, longitude);
        });

        map.setMapType("neshan");
        map.switchTrafficLayer(true);
    };

    useEffect(() => {
        if (mapRef.current?.map) {
            mapRef.current?.map.switchTrafficLayer(true);
            mapRef.current?.map.setMapType("standard-night");
        }
    }, []);

    return (
        <div style={{width: "100vh"}}>
            <NeshanMap
                mapKey="web.e90315c8f2c3487da6691e5e22297f79"
                defaultType="neshan"
                center={{latitude: 35.7665394, longitude: 51.4749824}}
                style={{height: "100vh", width: "100vw"}}
                onInit={onInit}
                zoom={13}
                traffic={false}
                poi={true}
            ></NeshanMap>
        </div>
    );
}
